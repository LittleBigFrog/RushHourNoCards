<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rush Hour Puzzle</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
    const RushHourVisualization = () => {
      // Color constants
      const COLORS = {
        boardColor: '#F2EACD',
        gridLineColor: '#222222',
        primaryPieceColor: '#CC3333',
        pieceColor: '#338899',
        pieceOutlineColor: '#222222',
        wallColor: '#222222',
      };

      const boardConfig = {
        board: "BBBJCCHooJoKHAAJoKooIDDLEEIooLooxoGG",
      };

      // Constants
      const CELL_SIZE = 80;
      const GRID_SIZE = 6;
      const BOARD_SIZE = CELL_SIZE * GRID_SIZE;

      // Convert board string to grid
      const board = [];
      for (let i = 0; i < 6; i++) {
        board.push(boardConfig.board.slice(i * 6, (i + 1) * 6).split(''));
      }

      // Find vehicle dimensions
      const findVehicle = (startI, startJ, piece) => {
        let width = 1, height = 1;
        
        // Check horizontal
        while (startJ + width < 6 && board[startI][startJ + width] === piece) {
          width++;
        }
        
        // If not horizontal, check vertical
        if (width === 1) {
          while (startI + height < 6 && board[startI + height][startJ] === piece) {
            height++;
          }
        }

        return { width, height, isHorizontal: width > 1 };
      };

      return (
        <svg width={BOARD_SIZE} height={BOARD_SIZE} viewBox={`0 0 ${BOARD_SIZE} ${BOARD_SIZE}`}>
          {/* Board background */}
          <rect width={BOARD_SIZE} height={BOARD_SIZE} fill={COLORS.boardColor} />

          {/* Grid lines */}
          {[...Array(GRID_SIZE + 1)].map((_, i) => (
            <React.Fragment key={`grid-${i}`}>
              <line 
                x1={i * CELL_SIZE} 
                y1={0} 
                x2={i * CELL_SIZE} 
                y2={BOARD_SIZE} 
                stroke={COLORS.gridLineColor} 
                strokeWidth="2"
              />
              <line 
                x1={0} 
                y1={i * CELL_SIZE} 
                x2={BOARD_SIZE} 
                y2={i * CELL_SIZE} 
                stroke={COLORS.gridLineColor} 
                strokeWidth="2"
              />
            </React.Fragment>
          ))}

          {/* Exit marker */}
          <path
            d={`M ${BOARD_SIZE},${2.5 * CELL_SIZE} L ${BOARD_SIZE + CELL_SIZE/10},${2.5 * CELL_SIZE} L ${BOARD_SIZE},${2.5 * CELL_SIZE - CELL_SIZE/10} L ${BOARD_SIZE},${2.5 * CELL_SIZE + CELL_SIZE/10} Z`}
            fill={COLORS.gridLineColor}
          />

          {/* Vehicles and Walls */}
          {board.map((row, i) => 
            row.map((cell, j) => {
              // Skip empty or processed cells
              if (cell === 'o') return null;

              // Wall rendering
              if (cell === 'x') {
                return (
                  <rect 
                    key={`wall-${i}-${j}`}
                    x={j * CELL_SIZE} 
                    y={i * CELL_SIZE} 
                    width={CELL_SIZE}
                    height={CELL_SIZE}
                    fill={COLORS.wallColor}
                  />
                );
              }

              const { width, height, isHorizontal } = findVehicle(i, j, cell);
              
              // Prevent duplicate rendering
              if (i > 0 && (
                (isHorizontal && row[j-1] === cell) || 
                (!isHorizontal && board[i-1][j] === cell)
              )) return null;

              return (
                <rect 
                  key={`${i}-${j}`}
                  x={j * CELL_SIZE} 
                  y={i * CELL_SIZE} 
                  width={isHorizontal ? width * CELL_SIZE : CELL_SIZE}
                  height={!isHorizontal ? height * CELL_SIZE : CELL_SIZE}
                  fill={cell === 'A' ? COLORS.primaryPieceColor : COLORS.pieceColor}
                  stroke={COLORS.pieceOutlineColor}
                  strokeWidth={2}
                  rx={8}
                  ry={8}
                />
              );
            })
          )}
        </svg>
      );
    };

    const App = () => {
      return (
        <div style={{ 
          display: 'flex', 
          justifyContent: 'center', 
          alignItems: 'center', 
          height: '100vh',
          backgroundColor: '#f0f0f0'
        }}>
          <RushHourVisualization />
        </div>
      );
    };

    const { createRoot } = ReactDOM;
    createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
